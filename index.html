<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <title>2026 åŠå°é«”åƒ¹å€¼ç™¼ç¾æ¨¡å‹ - æˆé•·é æ¸¬ç‰ˆ</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root { --primary: #2563eb; --success: #16a34a; --warning: #ca8a04; --danger: #dc2626; }
        body { font-family: 'Segoe UI', system-ui, sans-serif; background: #f8fafc; padding: 20px; color: #1e293b; }
        .container { max-width: 1200px; margin: auto; background: white; padding: 30px; border-radius: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.05); }
        .grid { display: grid; grid-template-columns: 2fr 1fr; gap: 30px; }
        .card { border: 1px solid #e2e8f0; padding: 20px; border-radius: 12px; background: #ffffff; }
        .highlight-box { background: #f0fdf4; border: 1px solid #bbf7d0; padding: 15px; border-radius: 10px; margin-bottom: 15px; }
        h1, h2 { color: #0f172a; margin-top: 0; }
        .badge { padding: 4px 8px; border-radius: 4px; font-size: 12px; font-weight: bold; }
        .badge-grow { background: #dcfce7; color: #166534; }
        table { width: 100%; border-collapse: collapse; margin-top: 10px; font-size: 14px; }
        th, td { text-align: left; padding: 10px; border-bottom: 1px solid #f1f5f9; }
        th { color: #64748b; }
        input, select { width: 100%; padding: 10px; margin: 8px 0; border: 1px solid #cbd5e1; border-radius: 6px; }
        .btn { background: var(--primary); color: white; border: none; padding: 12px; width: 100%; border-radius: 6px; cursor: pointer; font-weight: bold; }
    </style>
</head>
<body>

<div class="container">
    <h1>ğŸš€ 2026 åŠå°é«”åƒ¹å€¼ç™¼ç¾æ¨¡å‹</h1>
    <p>åŸºæ–¼ 2025/12 å¯¦ç¸¾èˆ‡ 2026 æˆé•·é æ¸¬ (PEG åˆ†æ)</p>

    <div class="grid">
        <div class="card">
            <canvas id="growthChart" height="500"></canvas>
        </div>

        <div class="card">
            <h2>ğŸ¯ æˆé•·æ½›åŠ›æƒæ</h2>
            <div id="undervaluedList"></div>
            
            <hr style="margin: 20px 0; border: 0; border-top: 1px solid #eee;">
            
            <h3>ä¼°å€¼æ¨¡æ“¬å™¨</h3>
            <label>é è¨ˆ 2026 æ¯›åˆ©ç‡ (%)</label>
            <input type="number" id="gmIn" value="40">
            <label>é è¨ˆ 2026 æ·¨åˆ©æˆé•·ç‡ (%)</label>
            <input type="number" id="grIn" value="20">
            <button class="btn" onclick="runSim()">è¨ˆç®—åˆç†è‚¡åƒ¹ä½éš</button>
            <div id="simResult" style="margin-top: 15px; font-weight: bold; font-size: 18px; color: var(--primary);"></div>
        </div>
    </div>

    <div class="card" style="margin-top: 30px;">
        <h2>ğŸ“Š è¢«ä½ä¼°æ¨™çš„æ•¸æ“šè©³æƒ… (2026 Forecast)</h2>
        <table id="detailTable">
            <thead>
                <tr>
                    <th>å…¬å¸</th>
                    <th>2025 GM</th>
                    <th>2026 é ä¼°æˆé•·</th>
                    <th>ç›®å‰ PE</th>
                    <th>PEG</th>
                    <th>ç‹€æ…‹</th>
                </tr>
            </thead>
            <tbody></tbody>
        </table>
    </div>
</div>

<script>
    // æ ¸å¿ƒæ•¸æ“šåº«ï¼šå« 2025 å¯¦ç¸¾èˆ‡ 2026 é æ¸¬
    const companies = [
        // è¢«ä½ä¼°çµ„ (ç·šä¸‹é ç«¯)
        { n: "è¯è© ", x: 40.1, y: 15.2, grow: 12, eps26: 42.5, type: "ICè¨­è¨ˆ", color: "#16a34a" },
        { n: "ä¸–ç•Œå…ˆé€²", x: 33.1, y: 14.5, grow: 18, eps26: 5.6, type: "æ™¶åœ“è£½é€ ", color: "#16a34a" },
        { n: "åŠ›æˆ", x: 38.2, y: 13.5, grow: 14, eps26: 13.2, type: "å°æ¸¬", color: "#16a34a" },
        { n: "äº¬é¼", x: 41.2, y: 16.5, grow: 22, eps26: 30.1, type: "è¨­å‚™", color: "#16a34a" },
        // å¸¸æ…‹çµ„èˆ‡ç·šä¸Šçµ„
        { n: "å°ç©é›»", x: 62.5, y: 26.5, grow: 25, eps26: 68.0, type: "æ™¶åœ“è£½é€ ", color: "#2563eb" },
        { n: "è¯ç™¼ç§‘", x: 47.5, y: 24.7, grow: 15, eps26: 75.0, type: "ICè¨­è¨ˆ", color: "#2563eb" },
        { n: "ä¸–èŠ¯-KY", x: 35.2, y: 38.2, grow: 40, eps26: 115.0, type: "ICè¨­è¨ˆ", color: "#dc2626" },
        { n: "ç‘æ˜±", x: 51.2, y: 22.0, grow: 10, eps26: 32.0, type: "ICè¨­è¨ˆ", color: "#2563eb" },
        { n: "å®¶ç™»", x: 48.5, y: 32.1, grow: 30, eps26: 38.0, type: "è¨­å‚™", color: "#dc2626" }
    ];

    // è¨ˆç®—å›æ­¸ç·š
    function getRegression() {
        const n = companies.length;
        let sX=0, sY=0, sXY=0, sXX=0;
        companies.forEach(c => { sX+=c.x; sY+=c.y; sXY+=c.x*c.y; sXX+=c.x*c.x; });
        const slope = (n*sXY - sX*sY) / (n*sXX - sX*sX);
        const intercept = (sY - slope*sX) / n;
        return { slope, intercept };
    }

    const model = getRegression();

    // åˆå§‹åŒ–åœ–è¡¨
    const ctx = document.getElementById('growthChart').getContext('2d');
    const chart = new Chart(ctx, {
        type: 'scatter',
        data: {
            datasets: [{
                label: 'å…¬å¸ä¼°å€¼ä½éš',
                data: companies.map(c => ({ x: c.x, y: c.y, n: c.n })),
                backgroundColor: companies.map(c => c.color),
                pointRadius: 8
            }, {
                label: 'åˆç†åƒ¹å€¼ç·š',
                type: 'line',
                data: [{x: 10, y: model.slope*10+model.intercept}, {x: 70, y: model.slope*70+model.intercept}],
                borderColor: '#cbd5e1',
                borderDash: [5, 5],
                fill: false,
                pointRadius: 0
            }]
        },
        options: {
            responsive: true,
            plugins: {
                tooltip: {
                    callbacks: {
                        label: (c) => {
                            const comp = companies[c.dataIndex];
                            return `${comp.n}: PE ${comp.y}, 2026é æœŸæˆé•· ${comp.grow}%`;
                        }
                    }
                }
            },
            scales: {
                x: { title: { display: true, text: 'æ¯›åˆ©ç‡ (GM %)' } },
                y: { title: { display: true, text: 'æœ¬ç›Šæ¯” (P/E)' } }
            }
        }
    });

    // å¡«å……æ•¸æ“šåˆ—è¡¨
    function updateUI() {
        const list = document.getElementById('undervaluedList');
        const tbody = document.querySelector('#detailTable tbody');
        
        companies.filter(c => c.color === "#16a34a").forEach(c => {
            const peg = (c.y / c.grow).toFixed(2);
            list.innerHTML += `
                <div class="highlight-box">
                    <strong>${c.n}</strong> <span class="badge badge-grow">æˆé•· +${c.grow}%</span>
                    <div style="font-size: 13px; margin-top: 5px; color: #64748b;">
                        PEG: ${peg} | 2026 é ä¼° EPS: $${c.eps26}
                    </div>
                </div>
            `;
            
            tbody.innerHTML += `
                <tr>
                    <td><b>${c.n}</b></td>
                    <td>${c.x}%</td>
                    <td style="color:var(--success)">+${c.grow}%</td>
                    <td>${c.y}x</td>
                    <td><b style="${peg < 1 ? 'color:var(--success)' : ''}">${peg}</b></td>
                    <td>${peg < 1.2 ? 'ğŸ”¥ é¡¯è‘—ä½ä¼°' : 'åˆç†åä½'}</td>
                </tr>
            `;
        });
    }

    function runSim() {
        const gm = document.getElementById('gmIn').value;
        const grow = document.getElementById('grIn').value;
        const basePE = model.slope * gm + model.intercept;
        // åŠ å…¥æˆé•·æº¢åƒ¹å› å­: æˆé•·æ¯å¤š10%ï¼ŒPEå¤šåŠ 15%
        const adjustedPE = basePE * (1 + (grow - 15) * 0.015);
        document.getElementById('simResult').innerHTML = `
            é ä¼°åˆç† PE: ${adjustedPE.toFixed(1)} å€<br>
            <span style="font-size:12px; color:#64748b;">(åŸºæ–¼ç”¢æ¥­å¹³å‡èˆ‡æˆé•·ç‡ä¿®æ­£)</span>
        `;
    }

    updateUI();
</script>
</body>
</html>
